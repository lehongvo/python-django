<div class="product-card premium-product-card" style="animation-delay: {% load store_filters %}{% if forloop.counter0 %}{{ forloop.counter0|mul:100 }}{% else %}0{% endif %}ms">
    <!-- Product Image -->
    <div class="image-container">
        {% if product.image %}
            <img src="{{ product.thumbnail_url|default:product.image.url }}" alt="{{ product.name }}">
        {% else %}
            <div class="w-full h-full flex items-center justify-center bg-gradient-to-br from-indigo-50 to-purple-50">
                <i class="fas fa-image text-6xl text-indigo-300"></i>
            </div>
        {% endif %}
        
        <!-- Discount Badge -->
        {% if product.computed_discount_percent > 0 %}
        <div class="discount-badge">
            <i class="fas fa-fire"></i>{{ product.computed_discount_percent|floatformat:0 }}% OFF
        </div>
        {% endif %}
        
        <!-- New Badge (optional) -->
        {% if forloop.counter <= 5 %}
        <div class="new-badge">NEW</div>
        {% endif %}
        
        <!-- Quick Actions Overlay -->
        <div class="quick-actions-overlay">
            <div class="quick-actions-buttons">
                <a href="{{ product.get_absolute_url }}" class="quick-action-btn">
                    <i class="fas fa-eye"></i> View
                </a>
                {% if user.is_authenticated %}
                <button type="button" onclick="addToCart({{ product.id }})" class="quick-action-btn primary">
                    <i class="fas fa-shopping-cart"></i> Add
                </button>
                {% else %}
                <a href="/login/?next={{ request.path }}" class="quick-action-btn primary">
                    <i class="fas fa-shopping-cart"></i> Add
                </a>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Product Info -->
    <div class="product-info">
        <span class="category-tag">{{ product.category.name }}</span>
        
        <h3 class="product-name">{{ product.name }}</h3>
        
        {% if show_description %}
        <p class="text-gray-600 text-sm mb-4 line-clamp-2">{{ product.short_description|default:product.description|truncatewords:18 }}</p>
        {% endif %}
        
        <!-- Rating -->
        <div class="rating-section">
            <div class="stars">
                {% for i in "12345" %}
                <i class="fas fa-star"></i>
                {% endfor %}
            </div>
            <span class="rating-text">(4.9) {{ product.stock|add:1000 }}+ reviews</span>
        </div>
        
        <!-- Price Section -->
        <div class="price-section">
            <div class="price-row">
                <span class="current-price">{% load store_filters %}{{ product.price|format_vnd }}</span>
                {% if product.compare_price %}
                <span class="compare-price">{{ product.compare_price|format_vnd }}</span>
                {% endif %}
            </div>
            
            <!-- Stock Badge -->
            <div class="stock-status {% if product.is_in_stock %}in-stock{% else %}out-of-stock{% endif %}">
                <i class="fas fa-{% if product.is_in_stock %}check-circle{% else %}times-circle{% endif %}"></i>
                <span>{% if product.is_in_stock %}In Stock{% else %}Out of Stock{% endif %}</span>
            </div>
            
            <!-- Action Buttons -->
            <div class="action-buttons">
                <a href="{{ product.get_absolute_url }}" class="btn-premium btn-premium-primary">
                    <i class="fas fa-eye"></i> View Details
                </a>
                {% if product.is_in_stock %}
                {% if user.is_authenticated %}
                <button type="button" onclick="addToCart({{ product.id }})" class="btn-premium btn-premium-icon">
                    <i class="fas fa-shopping-cart"></i>
                </button>
                {% else %}
                <a href="/login/?next={{ request.path }}" class="btn-premium btn-premium-icon">
                    <i class="fas fa-shopping-cart"></i>
                </a>
                {% endif %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
